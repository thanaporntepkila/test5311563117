<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>D3: A true bar chart with SVG rects</title>
      <script type="text/javascript" src="http://d3js.org/d3.v3.min.js"></script>
		<style type="text/css">
			/* No style rules here yet */		
		</style>
	</head>
	<body>
	<h1>เรื่องปัญหาของนักศึกษาเกี่ยวกับยาเสพติด</h1>
	 <p>จุดประสงค์ : เพื่อแสดงให้เห็นถึงปัญหาของนักศึกษาที่เกิดจากยาเสพติด ว่ามีปัญหาถึงระดับไหนและส่งผลกระทบมากน้อยเพียงใด  เพื่อให้ทุกฝ่ายได้ตระหนักถึงความสำคัญในเรื่องนี้  และมีการใส่ใจการแก้ปัญหาทั้งบุคคลรอบข้าง  และตัวเองมาขึ้น</p>
	 <p>สิ่งที่จะโชว์ : </p>
	 <li>ต้องการแสดงจำนวนผู้ติดยาที่มีเพิ่มขึ้นอย่างต่อเนื่องของนักศึกษา</li>
	 <li>ต้องการโชว์สาเหตุหลักๆว่ามีอะไรบ้างที่เป็นสาเหตุให้นักศึกษาติดยาเสพติด  </li>
	 <li>ต้องการโชว์ว่ายาเสพติดประเภทไหนบ้างที่นักศึกษาเลือกเสพเป็นส่วนใหญ่ </li>
	 <li>ต้องการแสดงให้เห็นจำนวนนักศึกษาที่เรียนไม่จบหรือโดนไล่ออกนื่องด้วยการติดยา</li>
	 <li>ตต้องการแสดงเปรียบเทียบเปอร์เซ็นของผู้ดิดยาของชายและหญิง</li>
	 <p>รูปแบบ : </p>
		
		<script type="text/javascript">
			//Width and height
			var w = 500;
			var h = 500;
			
			var dataset = [ 69.58, 45.32, 40.6, 32.72, 59.03, 63.11, 74.16, 77.00 ];
			
			//Create SVG element
			var svg = d3.select("body")
						.append("svg")
						.attr("width", w)
						.attr("height", h);

			svg.selectAll("rect")
			   .data(dataset)
			   .enter()
			   .append("rect")
			   .attr("x", function(d, i) {
			   		return i * 21;
			   })
			   .attr("y", function(d) {
			   		return h - (d*4);   //ทำเพื่อให้กราฟกลับหัว
			   })
			   .attr("width", 20)
			   .attr("height", function(d) {
			   		return d * 4 ;
			   })
			   .attr("fill", function(d) {
					return "rgb(0, 0, " + (d * 10) + ")";
			   });
			   //.attr("fill", "teal");
			   
			svg.selectAll("text")
				.data(dataset)
				.enter()
				.append("text")
				.text(function(d) {
					return d;
				})
				.attr("x", function(d, i) {
					return (i * 21)+10 ;
				})
				.attr("y", function(d) {
					return h - (d * 4) +15;
				})
   
				.attr("font-family", "sans-serif")
				.attr("font-size", "11px")
				.attr("fill", "white")
				.attr("text-anchor", "middle");
				
		</script>
		<p>แสดงกราฟจำนวนนักศึกษาที่ติดยาตั้งแต่ปี  2550-2557</p> 
		
		<script type="text/javascript">
			var w = 500;
			var h = 500;
		       var dataset = [ 20, 30, 15, 15 , 5, 2, 3];
			   var outerRadius = w / 2;
			   var innerRadius = 0;
			   var arc = d3.svg.arc()
							.innerRadius(innerRadius)
							.outerRadius(outerRadius);
			   var pie = d3.layout.pie();
			   var color = d3.scale.category10();
			   var svg = d3.select("body")
						.append("svg")
						.attr("width", w)
						.attr("height", h);
				//Set up groups
				var arcs = svg.selectAll("g.arc")
						  .data(pie(dataset))
						  .enter()
						  .append("g")
						  .attr("class", "arc")
						  .attr("transform", "translate(" + outerRadius + "," + outerRadius + ")");
						  //ต้องเลื่อนเพราะจุดกลางรัศมีมันเป็น (0,0)
			
				//Draw arc paths
				arcs.append("path")
			    .attr("fill", function(d, i) {
			    	return color(i);
			    })
			    .attr("d", arc);
			
			    //Labels
				arcs.append("text")
			    .attr("transform", function(d) {
			    	return "translate(" + arc.centroid(d) + ")";  //จุดกึ่งกลาง
			    })
			    .attr("text-anchor", "middle")
			    .text(function(d) {
			    	return d.value;
			    });

				</script>
				<p>แสดงกราฟเปอร์เซ็นของประเภทยาเสพติดที่นักศึกษาเสพ</p> 
				 
				
	</body>
</html>

